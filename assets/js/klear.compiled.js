jQuery.cookie=function(a,b,d){if(1<arguments.length&&(null===b||"object"!==typeof b)){d=jQuery.extend({},d);null===b&&(d.expires=-1);if("number"===typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return document.cookie=[encodeURIComponent(a),"=",d.raw?""+b:encodeURIComponent(""+b),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=b||{};f=d.raw?function(a){return a}:decodeURIComponent;
return(e=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?f(e[1]):null};(function(a){a.extend({getStylesheet:function(b,d,e){a("link[type='text/css']",a("head:first"));var d=d||"rand"+Math.floor(1E4*Math.random()),f=a("link#"+d,a("head:first"));0<f.length?f.attr("href",b):a("<link />",{href:b,media:e||"screen",type:"text/css",rel:"stylesheet",id:d}).appendTo("head:first")},removeStylesheet:function(b){try{a("link#"+b).remove()}catch(d){}}})})(jQuery);(function(a){a.klear=a.klear||{};a.klear.errors={};a.klear.addErrors=function(b){a.extend(a.klear.errors,b)};a.klear.fetchErrorByCode=function(b){return"undefined"!=typeof a.klear.errors[b]?a.klear.errors[b]:!1}})(jQuery);(function(a){a.widget("klear.moduleDialog",a.ui.dialog,{_superClass:a.ui.dialog.prototype,_getKlearPosition:function(){return this.options.klearPosition?a(this.options.klearPosition):document.body},_makeDraggable:function(){this.uiDialog.draggable({handle:".ui-dialog-titlebar",containment:this._getKlearPosition()})},_create:function(){this.originalTitle=this.element.attr("title");this.options.isHidden=!1;"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||
this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),c=(b.uiDialog=a("<div></div>")).appendTo(this._getKlearPosition()).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){if(d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE){b.close(c);c.preventDefault()}}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(false,
a)});b.element.show().removeAttr("title").css("height","auto ").addClass("ui-dialog-content ui-widget-content").appendTo(c);var g=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(c),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){b.close(a);
return false}).appendTo(g);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(i);a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(g);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose);g.find("*").add(g).disableSelection();d.draggable&&a.fn.draggable&&b._makeDraggable();d.resizable&&a.fn.resizable&&b._makeResizable();b._createButtons(d.buttons);b._isOpen=!1;a.fn.bgiframe&&
c.bgiframe()},close:function(b){var d=this,e,f,c=this._getKlearPosition(),g=c.attr("id");a(window).off("scroll."+g);c.css("overflow","auto");if(!1!==d._trigger("beforeClose",b))return d.overlay&&d.overlay.destroy(),d.uiDialog.unbind("keypress.ui-dialog"),d._isOpen=!1,d.options.hide?d.uiDialog.hide(d.options.hide,function(){d._trigger("close",b)}):(d.uiDialog.hide(),d._trigger("close",b)),a.ui.dialog.overlay.resize(),d.options.modal&&(e=0,a(".ui-dialog").each(function(){if(this!==d.uiDialog[0]){f=
a(this).css("z-index");isNaN(f)||(e=Math.max(e,f))}}),a.ui.dialog.maxZ=e),d},open:function(){if(!this._isOpen){var b=this,d=b.options,e=b.uiDialog;b.overlay=d.modal?new a.ui.dialog.overlay(b):null;b.overlay.$el.appendTo(this._getKlearPosition());var f=this._getKlearPosition(),c=f.attr("id");f.css("overflow","hidden");b._size();b._position(d.position);f=this._getNewPosition();e.css("top",f.top+"px").css("left",f.left+"px");a(b.element).css("height","auto");e.show(d.show);b.moveToTop(!0);a(window).on("scroll."+
c,function(){var c=b._getNewPosition();a(b.uiDialog).stop().animate({top:Math.abs(c.top)+"px",left:Math.abs(c.left)+"px"},{duration:350,complete:function(){0>parseFloat(a(this).css("top"))&&a(this).css("top","0px")}})});d.modal&&e.bind("keydown.ui-dialog",function(c){if(c.keyCode===a.ui.keyCode.TAB){var b=a(":tabbable",this),d=b.filter(":first"),b=b.filter(":last");if(c.target===b[0]&&!c.shiftKey)return d.focus(1),!1;if(c.target===d[0]&&c.shiftKey)return b.focus(1),!1}});a(b.element.find(":tabbable").get().concat(e.find(".ui-dialog-buttonpane :tabbable").get().concat(e.get()))).eq(0).focus();
b._isOpen=!0;b._trigger("open");return b}},getContext:function(){return this.element},updateContent:function(b,d){var e=this;e._getKlearPosition().css("overflow","hidden");a(this.element).slideUp("fast",function(){var f=a(this);f.html(b).css("height","auto");var c=a("input, button, select",a(e.uiDialog));c.attr("disabled","disabled");f.slideDown(100,function(){a(window).trigger("scroll."+e._getKlearPosition().attr("id"));c.removeAttr("disabled");"function"==typeof d&&d.apply(e)})})},updateTitle:function(b){a(".ui-dialog-title",
this.uiDialogTitlebar).html(b)},setAsLoading:function(){a(this.element).html('<br /><div class="loadingCircle"></div><div class="loadingCircle1"></div>')},_getNewPosition:function(){var b=a(window).scrollTop()+this._getKlearPosition().offset().top-a(this.uiDialog).height()/2;10>b&&(b=10);var d=this._getKlearPosition().width()/2-a(this.uiDialog).width()/2;return{top:b,left:d}}});a.extend(a.ui.dialog.overlay,{create:function(b){var d="klearModule"==b.widgetName&&a(b.element).moduleDialog("option","klearPosition")?
a(b.element).moduleDialog("option","klearPosition"):document;0===this.instances.length&&(a(d).bind("keydown.dialog-overlay",function(e){a(d).is(":visible")&&(b.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE)&&(b.close(e),e.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));d==document&&(d=document.body);var e=a("<div />").addClass("ui-widget-overlay").appendTo(d).css({width:this.width(),height:this.height()});this.instances.push(e);
return e}})})(jQuery);(function(a){a.klear=a.klear||{};a.klear.loadedScripts={};a.klear.loadedTemplates={};a.widget("klear.module",{_create:function(){a.klear.module.instances.push(this.element)},_init:function(){a.console.info("[klear.module] _init module");this._initOptions();this.setAsloading();this._initTab()},destroy:function(){a(this.options.menuLink).removeClass("ui-state-highlight");var b=a.inArray(this.element,a.klear.module.instances);-1<b&&a.klear.module.instances.splice(b,1);a.Widget.prototype.destroy.call(this)},
_setOptions:function(){a.Widget.prototype._setOptions.apply(this,arguments)},_setOption:function(b,d){"mainModuleLoaded"===b&&d?this.setMainLoaded():"addToBeLoadedFile"===b?(this.totalToBeLoadedItems+=d,this.updateTotalLoadingItems()):"addLoadedFile"===b?(this.totalLoadedItems++,this.updateCurrentLoadingItem()):a.Widget.prototype._setOption.apply(this,arguments)},enable:function(){},disable:function(){},_trigger:function(){},_getOtherInstances:function(){var b=this.element;return a.grep(a.klear.module.instances,
function(a){return a!==b})},options:{ui:null,container:null,mainEnl:null,title:null,file:null,filesUploading:{},panel:null,tabIndex:null,baseurl:null,menuLink:null,screen:null,dialog:null,dispatchOptions:{},tabLock:!1,parentScreen:!1,moduleDialog:null,PostDispatchMethod:null,PreDispatchMethod:null,shortcuts:{}},_initOptions:function(){a.console.info("[klear.module] _initOptions");this.options.mainEnl=a("a:first",this.element);this.options.title=a("a:first",this.element).html();this.options.file=a("a:first",
this.element).attr("href").replace(/\#tabs\-([^\_]+).*/,"$1");this.options.panel=this.options.ui.panel;this.options.tabIndex=this.options.ui.index;0<a("#target-"+this.options.file).length&&(this.options.menuLink=a("#target-"+this.options.file))},_initTab:function(){a.console.info("[klear.module] _initTab");if(this.options.menuLink&&!(0>=a("span.ui-silk",this.options.menuLink).length)){var b=this.options.mainEnl;a("span.ui-silk",this.element).attr("class",this._getTabIconClass()).on("click",function(){a(b).trigger("click")});
var d=this;a(this.options.ui.tab).off("mouseup.closing");a(this.options.ui.tab).on("mouseup.closing",function(b){button=null==b.which?2>b.button?"LEFT":4==b.button?"MIDDLE":"RIGHT":2>b.which?"LEFT":2==b.which?"MIDDLE":"RIGHT";if("MIDDLE"==button){b.stopPropagation();b.preventDefault();var f=a(this).attr("href");a(this).removeAttr("href");var c=a(this);setTimeout(function(){c.attr("href",f)},100);a(d.element).klearModule("close")}})}},reload:function(){a.console.info("[klear.module] reload");this._initTab()},
dispatch:function(){a.console.info("[klear.module] dispatch");var b={file:this.options.file};a.extend(b,this.options.dispatchOptions);"function"==typeof this.options.PreDispatchMethod&&this.options.PreDispatchMethod.apply(this);a.klear.request(b,this._parseDispatchResponse,this._errorResponse,this)},_errorResponse:function(){a.console.info("[klear.module] _errorResponse");this.setAsloaded();var b='<span class="ui-silk inline dialogTitle '+this._getTabIconClass()+' "></span>',d=[],d=arguments[0]&&
void 0!=arguments[0].message?arguments[0].message:Array.prototype.join.call(arguments,"</em><br /><em>",["klear.module"]),d="<em>"+d+"</em>",d=a.translate("Module registration error.")+"<br /><br />"+a.translate("Error: %s.",d),e=a.translate("Klear Module Error");this.showDialogError(d,{title:e+" - "+b+"",closeTab:this.options.tabIndex})},_parseDispatchResponse:function(b){a.console.info("[klear.module] _parseDispatchResponse");this.setAsloaded();a(this.options.panel).html("");b.mainTemplate&&(b.data.mainTemplate=
b.mainTemplate);var d=this;a(this.element).on("moduleInitReady",function(){a.console.info("[klear.module] "+b.plugin+" is ready.");typeof d.options.PostDispatchMethod=="function"&&d.options.PostDispatchMethod.apply(d)});a(this.element)[b.plugin]({data:b.data});"function"==typeof this.options.PostDispatchMethod&&this.options.PostDispatchMethod.apply(this)},reDispatch:function(){a.console.info("[klear.module] _reDispatch");this.element.trigger("reDispatch");this.setAsloading();this.dispatch()},getPanel:function(){return this.options.panel},
getContainer:function(){return this.options.container},shortcut:function(a){var d=a.which;if(this.options.shortcuts[d])for(var e in this.options.shortcuts[d])"function"==typeof this.options.shortcuts[d][e]&&(a.preventDefault(),a.stopPropagation(),this.options.shortcuts[d][e]())},getShortcuts:function(){return this.options.shortcuts},registerShortcut:function(a,d){this.options.shortcuts[a]||(this.options.shortcuts[a]=[]);this.options.shortcuts[a].push(d)},close:function(b){a.console.info("[klear.module] close");
var b=b||{},d=b.forced||!1;if(this.isLocked()&&!d)if(a(this.options.container).tabs("select",this.options.tabIndex),"function"==typeof this.options.tabLock){if(this.options.tabLock())return}else this.showInlineWarn(a.translate("This tab is locked."));var d=!1,e;for(e in this.options.filesUploading){d=!0;break}if(d){var f=this;this.showDialog(a.translate("Upload in progress.")+"<br />"+a.translate("Close the screen?"),{title:a.translate("Attention!"),buttons:[{text:a.translate("Cancel"),click:function(){a(this).moduleDialog("close")}},
{text:a.translate("Ignore changes and close"),click:function(){f.unsetAllUploadsInProgress();f.close()}}]})}else b&&(b.callback&&"function"==typeof b.callback)&&b.callback(),b=!1,this.options.tabIndex==parseInt(a.klear.canvas.tabs("option","selected"))&&(b=a(this.options.parentScreen)),a(this.options.container).tabs("remove",this.options.tabIndex),!1!==b&&a.klear.canvas.tabs("select",b.klearModule("option","tabIndex"))},getModuleDialog:function(){return this.options.moduleDialog},dialogMessageTmpl:'<div class="ui-widget"><div class="ui-state-${state} ui-corner-all inlineMessage"><p><span class="ui-icon ${icon} inlineMessage-icon"></span>{{html text}}</p></div></div>',
showDialog:function(b,d){var e={icon:d.icon||"ui-icon-info",state:d.state||"highlight",text:b,resizable:d.resizable||!1,buttons:d.buttons||null},f=a.tmpl(d.template||this.dialogMessageTmpl,e),c=d.dialogType||"moduleDialog",g=this,i=g._getTabIconClass(),n=!1===d.title?!1:'<span class="ui-icon  inlineMessage-icon dialogTitle '+e.icon+' "></span>'+d.title+""||'<span class="ui-silk inline dialogTitle '+i+' "></span>'+this.options.title+"",l=d.width||300,h=d.height||160,j=0==d.closeTab||d.closeTab?d.closeTab.toString():
!1;"moduleDialog"==c?(this.options.moduleDialog=f,this.options.moduleDialog.moduleDialog({position:{my:"center bottom",at:"center center",collision:"none"},buttons:e.buttons,title:n,modal:!0,width:l,height:h,resizable:e.resizable,klearPosition:this.getPanel(),open:function(){a(g.options.ui.tab).addClass("ui-state-disabled")},close:function(){a(this).moduleDialog("option","isHidden")||(a(g.options.ui.tab).removeClass("ui-state-disabled"),a(this).remove(),j&&g.close())}})):f.dialog({title:'<span class="ui-silk inline dialogTitle '+
i+' "></span>'+this.options.title+"",modal:d.modal||!1,close:function(){a(this).remove();j&&g.close()}})},showDialogMessage:function(b,d){var e={type:"msg",dialogType:"moduleDialog"},d=d||{};a.extend(e,d);this.showDialog(b,e)},showDialogWarn:function(b,d){var e={type:"warn",icon:"ui-icon-alert",dialogType:"moduleDialog"},d=d||{};a.extend(e,d);this.showDialog(b,e)},showDialogError:function(b,d){var e={type:"error",icon:"ui-icon-alert",state:"highlight",dialogType:"moduleDialog"},d=d||{};a.extend(e,
d);this.showDialog(b,e)},isLocked:function(){return!1!==this.options.tabLock},lockTab:function(a){"function"==typeof a?this._setOption("tabLock",a):this._setOption("tabLock",!0)},unLockTab:function(){this._setOption("tabLock",!1)},setAsChanged:function(a){this.element.addClass("changed");this.lockTab(a)},setAsUnChanged:function(){this.element.removeClass("changed");this.unLockTab()},setUploadInProgress:function(a){this.options.filesUploading[a]=!0},unsetUploadInProgress:function(a){this.options.filesUploading[a]&&
delete this.options.filesUploading[a]},unsetAllUploadsInProgress:function(){for(idx in this.options.filesUploading)delete this.options.filesUploading[idx]},_getTabIconClass:function(){return this.options.menuLink&&0<a("span.ui-silk",this.options.menuLink).length?a("span.ui-silk",this.options.menuLink).attr("class"):this.options.menuLink&&0<a("span.ui-silk",this.options.menuLink.parent()).length?a("span.ui-silk",this.options.menuLink.parent()).attr("class"):""},inlineMessageTmpl:'<div class="ui-widget"><div class="ui-state-${state} ui-corner-all inlineMessage"><p><span class="ui-icon ${icon} inlineMessage-icon"></span>{{html text}}</p></div></div>',
showInline:function(b,d){var e=a.tmpl(this.inlineMessageTmpl,{icon:d.icon?d.icon:"ui-icon-info",state:d.state?d.state:"highlight",text:b});e.prependTo(this.options.panel);var f=parseInt(d.timeout);0<d.timeout&&window.setTimeout(function(){e.fadeOut(function(){e.remove();d.fn&&"function"==typeof d.fn&&fn()})},f)},showInlineMessage:function(a,d,e){this.showInline(a,{type:"msg",fn:d||null,timeout:0==e||e?e:5E3})},showInlineWarn:function(a,d,e){this.showInline(a,{type:"warn",fn:d||null,timeout:0==e||
e?e:5E3,icon:"ui-icon-alert"})},showInlineError:function(a,d,e){this.showInline(a,{type:"error",fn:d||null,timeout:0==e||e?e:5E3,state:"error",icon:"ui-icon-alert"})},dialog:function(b){a("<div title='Aviso'>"+b+"</div>").dialog({open:function(){},position:"center",draggable:!1,resizable:!1})},highlightOn:function(){a(this.element).addClass("ui-state-highlight")},highlightOff:function(){a(this.element).removeClass("ui-state-highlight")},_loading:!1,setAsloading:function(){a.console.info("[klear.module] setAsLoading");
this._loading=!0;this.updateLoader()},setAsloaded:function(){a.console.info("[klear.module] setAsloaded");this._loading=!1;this.updateLoader()},loadingTmpl:['<div id="loadingTemplate" class="loadingPanel ui-widget-content ui-corner-all">',"<p>${loadingText}</p>",'<p class="extra main">${loadingTextMain}<span class="ui-icon ui-icon-circle-check inline"></span></p>','<p class="extra">${loadingTextExtra}(<span class="current">0</span>/<span class="total">?</span>)<span class="ui-icon ui-icon-circle-check inline"></span></p>',
"</div>"],totalToBeLoadedItems:0,totalLoadedItems:0,updateTotalLoadingItems:function(){var b=a(this.options.panel);a(".loadingPanel",b).find(".total").html(this.totalToBeLoadedItems)},updateCurrentLoadingItem:function(){var b=a(this.options.panel),d=20<100*this.totalLoadedItems/this.totalToBeLoadedItems?100*this.totalLoadedItems/this.totalToBeLoadedItems/100:".2";a(".loadingPanel",b).find(".current").css("opacity",d).html(this.totalLoadedItems)},setMainLoaded:function(){var b=a(this.options.panel);
a(".loadingPanel",b).find("p.main").addClass("complete")},updateLoader:function(){var b=a(this.options.panel);if(0==a(".loadingPanel",b).length)d=a.tmpl(this.loadingTmpl.join(""),{loadingText:a.translate("Loading content"),loadingTextMain:a.translate("Loading Main Module"),loadingTextExtra:a.translate("Loading Secondary modules")}),d.removeAttr("id").spin({lines:8,length:18,width:4,radius:10,trail:100,speed:1.2}).hide().appendTo(b);else var d=a(".loadingPanel",b);this._loading?(d.show(),this.showOverlay(),
a(this.options.ui.tab).addClass("ui-state-disabled")):a(this.options.ui.tab).removeClass("ui-state-disabled")},_getOverlay:function(){var b=a(this.options.panel);return 0==a("div.overlay",b).length?a("<div />").addClass("overlay").css({opacity:"0.6",width:b.width()+"px",height:b.height()+"px"}).hide().appendTo(b):a("div.overlay",b)},showOverlay:function(){this._getOverlay().show()},hideOverlay:function(){this._getOverlay().hide()},updateTitle:function(b){b&&""!=b&&a(this.options.ui.tab).html(b)},
getTitle:function(){return a(this.options.ui.tab).html()}});a.extend(a.klear.module,{instances:[]});a.widget.bridge("klearModule",a.klear.module)})(jQuery);(function(a){a.klear=a.klear||{};a.klear.cacheEnabled=!0;a.klear.removeCache=function(){a.klear.loadedScripts={};a.klear.loadedTemplates={}};a.klear.errorCodes={auth:["1002"]};var b={},d={};a.klear.buildRequest=function(d){var b={controller:"index",action:"dispatch",file:"index",post:!1};a.extend(b,d);var c={};a.each("execute type file screen dialog command pk language str namespace theme".split(" "),function(a,d){b[d]!==void 0&&(c[d]=b[d])});var d=b.post?"post":"get",g=void 0!=b.async?b.async:!0,
i=a.klear.baseurl+b.controller+"/"+b.action;"post"==d?(i+="?"+a.param(c),_data=b.post):_data=c;return{action:i,data:_data,type:d,async:g}};a.klear.requestTranslations=[];a.klear.requestSearchTranslations=function(){a('script[src*="js/translation"]',a("head")).each(function(){a.klear.requestTranslations.push(a(this).attr("src"))})};a.klear.requestReloadTranslations=function(){for(var d=a.klear.requestTranslations.length,b={},c=[],g=0;g<d;g++)if(void 0==b[a.klear.requestTranslations[g]]){b[a.klear.requestTranslations[g]]=
!0;var i=a('script[src="'+a.klear.requestTranslations[g]+'"]');0<i.length&&i.remove();a.ajax({url:a.klear.requestTranslations[g]+"?"+(new Date).getTime()+"&language="+a.klear.language,dataType:"script",type:"get",cache:!0,async:!0,success:function(){},error:function(){}});c.push(a.klear.requestTranslations[g])}a.klear.requestTranslations=c};a.klear.request=function(e,f,c,g){var i=arguments,n=function(){i.callee.apply(i.callee,Array.prototype.slice.call(i))},l="",h="",j=g&&g.element?function(c,b){a(g.element).klearModule("option",
c,b||!0)}:function(){},m=function(b){for(var d="baseurl templates scripts css data plugin".split(" "),i=0;i<d.length;i++)if("undefined"==typeof b[d[i]]){c.apply(g,[a.translate("Module registration error.")]);return}l=b.baseurl;h=b.cleanBaseurl;d=function(a,c){var b=0;for(c in a)b++;return b};a.when(k(b.templates,d(b.templates,"template")),t(b.css,d(b.css,"css")),p(b.scripts,d(b.scripts,"scripts"))).done(function(){var d=0;(function y(){!1===b.plugin||"function"==typeof a.fn[b.plugin]?f.apply(g,[b]):
40==++d?c.apply(g,[b.plugin+" plugin not found"]):window.setTimeout(y,50)})()}).fail(function(b){c.apply(g,[a.translate("Module registration error."),b])})},k=function(c,b){var g=a.Deferred();j("addToBeLoadedFile",b);if(0==b)g.resolve();else{var i=0,e=function(){j("addLoadedFile");b--;i++;0==b&&g.resolve(i)},n="";a.each(c,function(c,b){a.klear.cacheEnabled&&a.klear.loadedTemplates[c]?e():d[c]?d[c].push(e):(n="object"==typeof b&&"undefined"!=typeof b.module?h+"/"+b.module+b.tmpl:l+b,d[c]||(d[c]=[]),
a.ajax({url:n,dataType:"text",type:"get",cache:!0,success:function(b){a.template(c,b);a.klear.loadedTemplates[c]=!0;e();for(var g in d[c])d[c][g]();d[c]=!1},error:function(){g.reject(a.translate("Error downloading template [%s].",c))}}))});return g.promise()}},q=function(c){c.match(/js\/translation/)&&a.klear.requestTranslations.push(c)},p=function(c,d){var g=a.Deferred();j("addToBeLoadedFile",d);if(0==d)g.resolve();else{var i=0,e=!1;a.each(c,function(c,n){if(a.klear.cacheEnabled&&a.klear.loadedScripts[c])j("addLoadedFile"),
d--;else if(""==n)j("addLoadedFile"),d--;else if(!0==b[c])j("addLoadedFile"),d--;else{e=!0;var f="";"object"==typeof n&&"undefined"!=typeof n.module?f=h+"/"+n.module+n.tmpl:(f=l+n,q(f));b[c]=!0;try{a.ajax({url:f,dataType:"script",type:"get",cache:!0,async:!0,success:function(){a.klear.loadedScripts[c]=true;j("addLoadedFile");d--;i++;d==0&&g.resolve(i)},error:function(){b[c]=false;g.reject("Error downloading script ["+n+"]")}})}catch(o){console.log(o)}}});return e?g.promise():g.resolve(0)}},t=function(c,
b){var d=a.Deferred();j("addToBeLoadedFile",b);if(0==b)d.resolve();else{for(var g in c)a.getStylesheet(l+c[g],g),a("#"+g).on("load",function(){j("addLoadedFile");b--;0==b&&d.resolve(!0)});d.promise(!0)}},o=a.klear.buildRequest(e);if(e.external){var s=Math.round(1E3*Math.random(1E3,9999)),r="ftarget"+s,u=a("<iframe />",{name:r}).hide(),v=a("<form />").attr({action:o.action,method:o.type,target:r});a.each(a.param(o.data).split("&"),function(c,b){var d=b.split("=");a("<input>").attr("name",decodeURIComponent(d[0])).attr("type",
"hidden").val(d[1]).appendTo(v)});u.appendTo("body");if("function"==typeof f){var w="token"+s;a("<input type='hidden' name='__downloadToken'>").val(w).appendTo(v);var x=setInterval(function(){try{a.cookie("downloadToken")==w?(u.contents(),clearInterval(x),f(!0)):u.contents()}catch(b){"function"==typeof c&&(clearInterval(x),c())}},650)}v.appendTo("body").on("submit",function(){var c=a(this);setTimeout(function(){c.remove();u.remove()},1E7)}).trigger("submit");return!1}a.ajax({url:o.action,dataType:"json",
context:this,data:o.data,async:o.async,type:o.type,success:function(b){if(null!=b)if(b.mustLogIn&&"login"!=e.controller)e.isLogin||a.klear.hello("rememberCallback",n),a.klear.login();else switch(a.klear.login("close"),j("mainModuleLoaded"),b.responseType){case "dispatch":return m(b);case "simple":b.data?f.apply(g,[b.data]):c.apply(g,[a.translate("Unknown response format in Simple Response")]);break;case "redirect":window.location=b.data;break;default:c.apply(g,["Unknown response type"])}},error:function(b){try{var d=
a.parseJSON(b.responseText)}catch(i){d={message:a.translate("Undefined Error"),raw:b.responseText}}d.mustLogIn&&"login"!=e.controller||-1!=a.inArray(d.code,a.klear.errorCodes.auth)?(e.isLogin||a.klear.hello("setCallback",n),a.klear.login()):c.apply(g,[d])}})}})(jQuery);(function(a){a.xui||(a.xui={});var b=a.extend({},a.ui.tabs.prototype),d=b._create,e=b._update;a.xui.tabs=a.extend(b,{options:a.extend({},b.options,{scrollable:!1,closable:!1,animationSpeed:500}),_create:function(){var b=this.options;d.apply(this);if(b.scrollable){var c=this.element;c.parent().is(".ui-scrollable-tabs")&&c.parent(".ui-scrollable-tabs").replaceWith(c);c.parent().width();var g=c.wrap("<div></div>").parent().addClass("ui-scrollable-tabs ui-widget-content ui-corner-all"),i=this.element.find(".ui-tabs-nav:first").removeClass("ui-corner-all"),
e=a('<ol class="ui-helper-reset ui-helper-clearfix ui-tabs-nav-arrows" id="tabsListNavArrows"></ol>').prependTo(g),l=a('<li class="ui-tabs-arrow-previous ui-state-default ui-widget-content" title="Previous"><a href="#"><span class="ui-icon ui-icon-carat-1-w">Previous tab</span></a></li>').prependTo(e),h=a('<li class="ui-tabs-arrow-next ui-state-default ui-widget-content" title="Next"><a href="#"><span class="ui-icon ui-icon-carat-1-e">Next tab</span></a></li>').appendTo(e);a.fn.reverse=[].reverse;
var j=function(c){var a={};a.right=c.next("li").length!=0?c.next("li")[0].offsetLeft+15:c[0].offsetLeft+c.outerWidth(true);a.right=a.right+i[0].offsetLeft>e.width();a.left=c[0].offsetLeft+i[0].offsetLeft<0+(l.is(":visible")?l.outerWidth():0);return a},m=function(c,a){if(c!="none")if(c=="left"){l.show("fade");a.next("li").length==0&&h.hide("fade");var d=0,d=a.next("li").length!=0?a.next("li")[0].offsetLeft:a[0].offsetLeft+a.outerWidth(true),d=e.width()-d,d=d-(a.next("li").length==0?1:h.outerWidth());
i.animate({"margin-left":d+"px"},b.animationSpeed)}else{h.show("fade");a.prev("li").length==0&&l.hide("fade");d=0;d=a.prev("li").length==0?2:l.outerWidth()+2;d=(a[0].offsetLeft-d)*-1;i.animate({"margin-left":d},b.animationSpeed)}},k=function(c){return c?c?c[0].offsetLeft+c.outerWidth(true):i.find("li:last")[0].offsetLeft+i.find("li:last").outerWidth(true):0},q=function(){if(k()>e.width())h.show("fade");else{h.hide("fade");l.hide("fade");i.css("margin-left",0)}},p=function(d){b.closable&&(d||i.addClass("ui-tabs-closable").find("li")).each(function(){var b=
a(this).addClass("stHasCloseBtn");a(this).append(a("<span/>").addClass("ui-state-default ui-corner-all ui-tabs-close").hover(function(){a(this).toggleClass("ui-state-hover")}).append(a("<span/>").addClass("ui-icon ui-icon-circle-close").html("Close").attr("title","Close this tab").click(function(){c.tabs("remove",b.prevAll("li").length)})))})};a.fn.refreshTabs=function(){var a=i.find("li.ui-tabs-selected");c.trigger("tabsselect",[{tab:a.find("a")}]);if(k()>e.width()){a.next("li").length!=0&&h.show("fade");
a=i.find("li:last");a=a[0].offsetLeft+a.outerWidth(true);a=e.width()-i[0].offsetLeft-a;if(a>1){i.css("margin-left",i[0].offsetLeft+a-1);h.hide("fade")}}else{h.hide("fade");l.hide("fade");i.css("margin-left",0)}};(function(){p();q();h.on("click",function(a){a.preventDefault();a.stopPropagation();a=i.find("li.ui-tabs-selected").next("li");a.length&&a.find("a").trigger("click")});l.on("click",function(a){a.preventDefault();a.stopPropagation();a=i.find("li.ui-tabs-selected").prev("li");a.length&&a.find("a").trigger("click")});
c.bind("tabsselect",function(c,b){var d=a(b.tab).parent();d.next("li").length==0&&h.hide("fade");var g=j(d);m(g.right?"left":g.left?"right":"none",d)}).bind("tabsadd",function(c,b){a(b.tab).parent();h.show("fade")}).bind("tabsremove",function(){if(b.closable){if(c.tabs("length")==1){c.find("li .ui-tabs-close").hide();i.removeClass("ui-tabs-closable");c.trigger("tabsselect")}if(k()<e.width()){h.hide("fade");l.hide("fade")}else{j(i.find("li:last")).right||m("left",i.find("li:last"));q()}}})})()}return this},
_update:function(){e.apply(this)}});a.widget("xui.tabs",a.xui.tabs)})(jQuery);(function(a){a.extend({translate:function(b){var d=arguments,e=arguments.length;if(0>=e)return"0";var f=null;1<e&&"object"==typeof arguments[e-1]&&(f=arguments[e-1][0]);var c=b.replace(/'/g,"").replace(/"/g,"");void 0==a.translations[c]?void 0!=a.translationRegister&&a.translationRegister(b,f):b=a.translations[c];e=null==f?e:e-1;for(f=1;f<e;f++)void 0!=d[f]&&(b=b.replace(/%s/,d[f]));return b},addTranslation:function(b){a.extend(a.translations,b)},translations:{}})})(jQuery);(function(a){a(window.jQuery,window,document)})(function(a,b,d,e){a.widget("selectBox.selectBoxIt",{VERSION:"3.7.0",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:!0,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:!0,isMobile:function(){return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(navigator.userAgent||navigator.vendor||b.opera)},"native":!1,
aggressiveChange:!1,selectWhenHidden:!0,viewport:a(b),similarSearch:!1,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:!1,customShowHideEvent:!1,autoWidth:!0,html:!0,populate:"",dynamicPositioning:!0,hideCurrent:!1},getThemes:function(){var c=a(this.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",enabled:"enabled",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",
enabled:"ui-state-enabled",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+c,hover:"ui-btn-hover-"+c,enabled:"ui-enabled",disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+c,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+
c,container:"jquerymobile",open:"selectboxit-open"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",enabled:"selectboxit-enabled",disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},isDeferred:function(c){return a.isPlainObject(c)&&c.promise&&c.done},_create:function(c){var b=this.options.populate;if(this.element.is("select"))return this.widgetProto=a.Widget.prototype,
this.originalElem=this.element[0],this.selectBox=this.element,this.options.populate&&(this.add&&!c)&&this.add(b),this.selectItems=this.element.find("option"),this.firstSelectItem=this.selectItems.slice(0,1),this.documentHeight=a(d).height(),this.theme=this.getThemes()[this.options.theme]||this.getThemes()["default"],this.currentFocus=0,this.blur=!0,this.textArray=[],this.currentIndex=0,this.currentText="",this.flipped=!1,c||(this.selectBoxStyles=this.selectBox.attr("style")),this._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(this.theme)._eventHandlers(),
this.originalElem.disabled&&this.disable&&this.disable(),this._ariaAccessibility&&this._ariaAccessibility(),this.isMobile=this.options.isMobile(),this._mobile&&this._mobile(),this.options["native"]&&this._applyNativeSelect(),this.triggerEvent("create"),this},_createDropdownButton:function(){var c=this.originalElemId=this.originalElem.id||"",b=this.originalElemValue=this.originalElem.value||"",d=this.originalElemName=this.originalElem.name||"",e=this.options.copyClasses,f=this.selectBox.attr("class")||
"";this.dropdownText=a("<span/>",{id:c&&c+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:this.firstSelectItem.text()}).attr("data-val",b);this.dropdownImageContainer=a("<span/>",{"class":"selectboxit-option-icon-container"});this.dropdownImage=a("<i/>",{id:c&&c+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"});this.dropdown=a("<span/>",{id:c&&c+"SelectBoxIt","class":"selectboxit "+("button"===e?f:"")+" "+(this.selectBox.prop("disabled")?this.theme.disabled:
this.theme.enabled),name:d,tabindex:this.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(this.dropdownImageContainer.append(this.dropdownImage)).append(this.dropdownText);this.dropdownContainer=a("<span/>",{id:c&&c+"SelectBoxItContainer","class":"selectboxit-container "+("container"===e?f:"")}).append(this.dropdown);return this},_createUnorderedList:function(){var c=this,b,d,e,f,h,j,m,k="",q=c.originalElemId||"",q=a("<ul/>",{id:q&&q+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1}),
p,t,o,s;c.options.showFirstOption||(c.selectItems.first().attr("disabled","disabled"),c.selectItems=c.selectBox.find("option").slice(1));c.selectItems.each(function(r){e=d="";b=a(this).prop("disabled");f=a(this).attr("data-icon")||"";j=(h=a(this).attr("data-iconurl")||"")?"selectboxit-option-icon-url":"";m=h?"style=\"background-image:url('"+h+"');\"":"";p=a(this).attr("data-selectedtext");o=(t=a(this).attr("data-text"))?t:a(this).text();s=a(this).parent();if(s.is("optgroup")){d="selectboxit-optgroup-option";
a(this).index()===0&&(e='<span class="selectboxit-optgroup-header '+s.first().attr("class")+'"data-disabled="true">'+s.first().attr("label")+"</span>")}k=k+(e+'<li id="'+r+'" data-val="'+this.value+'" data-disabled="'+b+'" class="'+d+" selectboxit-option "+(a(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+f+" "+(j||c.theme.container)+'"'+m+"></i></span>"+(c.options.html?o:c.htmlEscape(o))+"</a></li>");
c.textArray[r]=b?"":o;if(this.selected){c._setText(c.dropdownText,p||o);c.currentFocus=r}});if(c.options.defaultText||c.selectBox.attr("data-text")){var r=c.options.defaultText||c.selectBox.attr("data-text");c._setText(c.dropdownText,r);c.options.defaultText=r}q.append(k);c.list=q;c.dropdownContainer.append(c.list);c.listItems=c.list.children("li");c.listAnchors=c.list.find("a");c.listItems.first().addClass("selectboxit-option-first");c.listItems.last().addClass("selectboxit-option-last");c.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(c.theme.disabled);
c.dropdownImage.addClass(c.selectBox.attr("data-icon")||c.options.defaultIcon||c.listItems.eq(c.currentFocus).find("i").attr("class"));c.dropdownImage.attr("style",c.listItems.eq(c.currentFocus).find("i").attr("style"));return c},_replaceSelectBox:function(){var c=this.originalElem.id||"",b=this.selectBox.attr("data-size"),b=this.listSize=b===e?"auto":"0"===b?"auto":+b;this.selectBox.css("display","none").after(this.dropdownContainer);this.dropdown.height();this.downArrow=a("<i/>",{id:c&&c+"SelectBoxItArrow",
"class":"selectboxit-arrow",unselectable:"on"});this.downArrowContainer=a("<span/>",{id:c&&c+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(this.downArrow);this.dropdown.append(this.downArrowContainer);this.listItems.removeClass("selectboxit-selected").eq(this.currentFocus).addClass("selectboxit-selected");this._realOuterWidth(this.dropdownImageContainer)||this.dropdownImageContainer.remove();this.options.autoWidth&&(this.dropdown.is(":visible")?this.dropdown.css({width:"auto"}).css({width:this.list.outerWidth(!0)+
this.downArrowContainer.outerWidth(!0)+this.dropdownImage.outerWidth(!0)}):this.dropdown.css({width:"auto"}).css({width:this._realOuterWidth(this.list)+this._realOuterWidth(this.downArrowContainer)+this._realOuterWidth(this.dropdownImage)}),this.list.css({"min-width":this.dropdown.width()}));this.dropdownContainer.addClass("selectboxit-rendering");this.dropdownText.css({"max-width":this.dropdownContainer.outerWidth(!0)-(this.downArrowContainer.outerWidth(!0)+this.dropdownImage.outerWidth(!0))});this.dropdownContainer.removeClass("selectboxit-rendering");
"number"===a.type(b)&&(this.maxHeight=this.listAnchors.outerHeight(!0)*b);return this},_scrollToView:function(a){var b=this.listItems.eq(this.currentFocus),d=this.list.scrollTop(),e=b.height(),b=b.position().top,f=Math.abs(b),h=this.list.height();"search"===a?h-b<e?this.list.scrollTop(d+(b-(h-e))):-1>b&&this.list.scrollTop(b-e):"up"===a?-1>b&&this.list.scrollTop(d-f):"down"===a&&h-b<e&&this.list.scrollTop(d+(f-h+e));return this},_callbackSupport:function(c){a.isFunction(c)&&c.call(this,this.dropdown);
return this},_setText:function(a,b){this.options.html?a.html(b):a.text(b);return this},open:function(a){var b=this,d=b.options.showEffect,e=b.options.showEffectSpeed,f=b.options.showEffectOptions,h=b.options["native"],j=b.isMobile;if(!b.listItems.length||b.dropdown.hasClass(b.theme.disabled))return b;if(!h&&!j&&!this.list.is(":visible")){b.triggerEvent("open");b._dynamicPositioning&&b.options.dynamicPositioning&&b._dynamicPositioning();if("none"===d)b.list.show();else if("show"===d||"slideDown"===
d||"fadeIn"===d)b.list[d](e);else b.list.show(d,f,e);b.list.promise().done(function(){b._scrollToView("search")})}b._callbackSupport(a);return b},close:function(a){var b=this.options.hideEffect,d=this.options.hideEffectSpeed,e=this.options.hideEffectOptions,f=this.isMobile;if(!this.options["native"]&&!f&&this.list.is(":visible"))if(this.triggerEvent("close"),"none"===b)this.list.hide();else if("hide"===b||"slideUp"===b||"fadeOut"===b)this.list[b](d);else this.list.hide(b,e,d);this._callbackSupport(a);
return this},toggle:function(){var a=this.list.is(":visible");a?this.close():a||this.open()},_keyMappings:{38:"up",40:"down",13:"enter",8:"backspace",9:"tab",32:"space",27:"esc"},_keydownMethods:function(){var a=this,b=a.list.is(":visible")||!a.options.keydownOpen;return{down:function(){a.moveDown&&b&&a.moveDown()},up:function(){a.moveUp&&b&&a.moveUp()},enter:function(){var b=a.listItems.eq(a.currentFocus);a._update(b);"true"!==b.attr("data-preventclose")&&a.close();a.triggerEvent("enter")},tab:function(){a.triggerEvent("tab-blur");
a.close()},backspace:function(){a.triggerEvent("backspace")},esc:function(){a.close()}}},_eventHandlers:function(){var c=this,b=c.options.nativeMousedown,d=c.options.customShowHideEvent,e,f,h=c.focusClass,j=c.hoverClass,m=c.openClass;this.dropdown.on({"click.selectBoxIt":function(){c.dropdown.trigger("focus",!0);c.originalElem.disabled||(c.triggerEvent("click"),!b&&!d&&c.toggle())},"mousedown.selectBoxIt":function(){a(this).data("mdown",!0);c.triggerEvent("mousedown");b&&!d&&c.toggle()},"mouseup.selectBoxIt":function(){c.triggerEvent("mouseup")},
"blur.selectBoxIt":function(){c.blur&&(c.triggerEvent("blur"),c.close(),a(this).removeClass(h))},"focus.selectBoxIt":function(b,d){var e=a(this).data("mdown");a(this).removeData("mdown");!e&&!d&&setTimeout(function(){c.triggerEvent("tab-focus")},0);d||(a(this).hasClass(c.theme.disabled)||a(this).addClass(h),c.triggerEvent("focus"))},"keydown.selectBoxIt":function(a){var b=c._keyMappings[a.keyCode],d=c._keydownMethods()[b];d&&(d(),c.options.keydownOpen&&("up"===b||"down"===b)&&c.open());d&&"tab"!==
b&&a.preventDefault()},"keypress.selectBoxIt":function(a){var b=c._keyMappings[a.charCode||a.keyCode],d=String.fromCharCode(a.charCode||a.keyCode);c.search&&(!b||b&&"space"===b)&&c.search(d,!0,!0);"space"===b&&a.preventDefault()},"mouseenter.selectBoxIt":function(){c.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){c.triggerEvent("mouseleave")}});c.list.on({"mouseover.selectBoxIt":function(){c.blur=!1},"mouseout.selectBoxIt":function(){c.blur=!0},"focusin.selectBoxIt":function(){c.dropdown.trigger("focus",
!0)}});c.list.on({"focusin.selectBoxIt":function(){c.listItems.not(a(this)).removeAttr("data-active");a(this).attr("data-active","");var b=c.list.is(":hidden");(c.options.searchWhenHidden&&b||c.options.aggressiveChange||b&&c.options.selectWhenHidden)&&c._update(a(this));a(this).addClass(h)},"mouseup.selectBoxIt":function(){b&&!d&&(c._update(a(this)),c.triggerEvent("option-mouseup"),"false"===a(this).attr("data-disabled")&&"true"!==a(this).attr("data-preventclose")&&c.close())},"mouseenter.selectBoxIt":function(){"false"===
a(this).attr("data-disabled")&&(c.listItems.removeAttr("data-active"),a(this).addClass(h).attr("data-active",""),c.listItems.not(a(this)).removeClass(h),a(this).addClass(h),c.currentFocus=+a(this).attr("id"))},"mouseleave.selectBoxIt":function(){"false"===a(this).attr("data-disabled")&&(c.listItems.not(a(this)).removeClass(h).removeAttr("data-active"),a(this).addClass(h),c.currentFocus=+a(this).attr("id"))},"blur.selectBoxIt":function(){a(this).removeClass(h)}},".selectboxit-option");c.list.on({"click.selectBoxIt":function(a){a.preventDefault()}},
"a");c.selectBox.on({"change.selectBoxIt, internal-change.selectBoxIt":function(a,b){var d,i;b||(d=c.list.find('li[data-val="'+c.originalElem.value+'"]'),d.length&&(c.listItems.eq(c.currentFocus).removeClass(c.focusClass),c.currentFocus=+d.attr("id")));d=c.listItems.eq(c.currentFocus);i=d.attr("data-selectedtext");f=(e=d.attr("data-text"))?e:d.find("a").text();c._setText(c.dropdownText,i||f);c.dropdownText.attr("data-val",c.originalElem.value);d.find("i").attr("class")&&(c.dropdownImage.attr("class",
d.find("i").attr("class")).addClass("selectboxit-default-icon"),c.dropdownImage.attr("style",d.find("i").attr("style")));c.triggerEvent("changed")},"disable.selectBoxIt":function(){c.dropdown.addClass(c.theme.disabled)},"enable.selectBoxIt":function(){c.dropdown.removeClass(c.theme.disabled)},"open.selectBoxIt":function(){var a=c.list.find("li[data-val='"+c.dropdownText.attr("data-val")+"']");a.length||(a=c.listItems.not("[data-disabled=true]").first());c.currentFocus=+a.attr("id");a=c.listItems.eq(c.currentFocus);
c.dropdown.addClass(m).removeClass(j).addClass(h);c.listItems.removeClass(c.selectedClass).removeAttr("data-active").not(a).removeClass(h);a.addClass(c.selectedClass).addClass(h);c.options.hideCurrent&&(c.listItems.show(),a.hide())},"close.selectBoxIt":function(){c.dropdown.removeClass(m)},"blur.selectBoxIt":function(){c.dropdown.removeClass(h)},"mouseenter.selectBoxIt":function(){a(this).hasClass(c.theme.disabled)||c.dropdown.addClass(j)},"mouseleave.selectBoxIt":function(){c.dropdown.removeClass(j)},
destroy:function(a){a.preventDefault();a.stopPropagation()}});return c},_update:function(a){var b,d=this.options.defaultText||this.selectBox.attr("data-text"),e=this.listItems.eq(this.currentFocus);"false"===a.attr("data-disabled")&&(this.listItems.eq(this.currentFocus).attr("data-selectedtext"),(b=e.attr("data-text"))||e.text(),(d&&this.options.html?this.dropdownText.html()===d:this.dropdownText.text()===d)&&this.selectBox.val()===a.attr("data-val")?this.triggerEvent("change"):(this.selectBox.val(a.attr("data-val")),
this.currentFocus=+a.attr("id"),this.originalElem.value!==this.dropdownText.attr("data-val")&&this.triggerEvent("change")))},_addClasses:function(a){this.focusClass=a.focus;this.hoverClass=a.hover;var b=a.button,d=a.list,e=a.arrow,f=a.container;this.openClass=a.open;this.selectedClass="selectboxit-selected";this.downArrow.addClass(this.selectBox.attr("data-downarrow")||this.options.downArrowIcon||e);this.dropdownContainer.addClass(f);this.dropdown.addClass(b);this.list.addClass(d);return this},refresh:function(a,
b){this._destroySelectBoxIt()._create(!0);b||this.triggerEvent("refresh");this._callbackSupport(a);return this},htmlEscape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(a){this.selectBox.trigger(a,{selectbox:this.selectBox,selectboxOption:this.selectItems.eq(this.options.showFirstOption?this.currentFocus:0<=this.currentFocus-1?this.currentFocus:0),dropdown:this.dropdown,dropdownOption:this.listItems.eq(this.currentFocus)});
return this},_copyAttributes:function(){this._addSelectBoxAttributes&&this._addSelectBoxAttributes();return this},_realOuterWidth:function(a){if(a.is(":visible"))return a.outerWidth(!0);var a=a.clone(),b;a.css({visibility:"hidden",display:"block",position:"absolute"}).appendTo("body");b=a.outerWidth(!0);a.remove();return b}});var f=a.selectBox.selectBoxIt.prototype;f.add=function(c,b){this._populate(c,function(c){var d=this,e=a.type(c),f=0,j,m=[],k=(j=d._isJSON(c))&&d._parseJSON(c);if(c&&("array"===
e||j&&k.data&&"array"===a.type(k.data))||"object"===e&&c.data&&"array"===a.type(c.data)){d._isJSON(c)&&(c=k);c.data&&(c=c.data);for(j=c.length;f<=j-1;f+=1)e=c[f],a.isPlainObject(e)?m.push(a("<option/>",e)):"string"===a.type(e)&&m.push(a("<option/>",{text:e,value:e}));d.selectBox.append(m)}else c&&"string"===e&&!d._isJSON(c)?d.selectBox.append(c):c&&"object"===e?d.selectBox.append(a("<option/>",c)):c&&(d._isJSON(c)&&a.isPlainObject(d._parseJSON(c)))&&d.selectBox.append(a("<option/>",d._parseJSON(c)));
d.dropdown?d.refresh(function(){d._callbackSupport(b)},!0):d._callbackSupport(b);return d})};f._parseJSON=function(c){return JSON&&JSON.parse&&JSON.parse(c)||a.parseJSON(c)};f._isJSON=function(a){try{return this._parseJSON(a),!0}catch(b){return!1}};f._populate=function(c,b){var d=this,c=a.isFunction(c)?c.call():c;d.isDeferred(c)?c.done(function(a){b.call(d,a)}):b.call(d,c);return d};f._ariaAccessibility=function(){var c=this,b=a("label[for='"+c.originalElem.id+"']");c.dropdownContainer.attr({role:"combobox",
"aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false","aria-owns":c.list[0].id});c.dropdownText.attr({"aria-live":"polite"});c.dropdown.on({"disable.selectBoxIt":function(){c.dropdownContainer.attr("aria-disabled","true")},"enable.selectBoxIt":function(){c.dropdownContainer.attr("aria-disabled","false")}});b.length&&c.dropdownContainer.attr("aria-labelledby",b[0].id);c.list.attr({role:"listbox","aria-hidden":"true"});c.listItems.attr({role:"option"});c.selectBox.on({"open.selectBoxIt":function(){c.list.attr("aria-hidden",
"false");c.dropdownContainer.attr("aria-expanded","true")},"close.selectBoxIt":function(){c.list.attr("aria-hidden","true");c.dropdownContainer.attr("aria-expanded","false")}});return c};f._addSelectBoxAttributes=function(){var c=this;c._addAttributes(c.selectBox.prop("attributes"),c.dropdown);c.selectItems.each(function(b){c._addAttributes(a(this).prop("attributes"),c.listItems.eq(b))});return c};f._addAttributes=function(c,b){var d=this.options.copyAttributes;c.length&&a.each(c,function(c,e){var f=
e.name.toLowerCase(),j=e.value;"null"!==j&&(-1!==a.inArray(f,d)||-1!==f.indexOf("data"))&&b.attr(f,j)});return this};f.destroy=function(a){this._destroySelectBoxIt();this.widgetProto.destroy.call(this);this._callbackSupport(a);return this};f._destroySelectBoxIt=function(){this.dropdown.off(".selectBoxIt");a.contains(this.dropdownContainer[0],this.originalElem)&&this.dropdownContainer.before(this.selectBox);this.dropdownContainer.remove();this.selectBox.removeAttr("style").attr("style",this.selectBoxStyles);
this.selectBox.show();this.triggerEvent("destroy");return this};f.disable=function(a){this.options.disabled||(this.close(),this.selectBox.attr("disabled","disabled"),this.dropdown.removeAttr("tabindex").removeClass(this.theme.enabled).addClass(this.theme.disabled),this.setOption("disabled",!0),this.triggerEvent("disable"));this._callbackSupport(a);return this};f.disableOption=function(c,b){var d,e;"number"===a.type(c)&&(this.close(),d=this.selectBox.find("option").eq(c),this.triggerEvent("disable-option"),
d.attr("disabled","disabled"),this.listItems.eq(c).attr("data-disabled","true").addClass(this.theme.disabled),this.currentFocus===c&&(d=this.listItems.eq(this.currentFocus).nextAll("li").not("[data-disabled='true']").first().length,e=this.listItems.eq(this.currentFocus).prevAll("li").not("[data-disabled='true']").first().length,d?this.moveDown():e?this.moveUp():this.disable()));this._callbackSupport(b);return this};f._isDisabled=function(){this.originalElem.disabled&&this.disable();return this};f._dynamicPositioning=
function(){if("number"===a.type(this.listSize))this.list.css("max-height",this.maxHeight||"none");else{var c=this.dropdown.offset().top,b=this.list.data("max-height")||this.list.outerHeight(),d=this.dropdown.outerHeight(),e=this.options.viewport,f=e.height(),e=a.isWindow(e.get(0))?e.scrollTop():e.offset().top,h=!(c+d+b<=f+e);this.list.data("max-height")||this.list.data("max-height",this.list.outerHeight());h?this.dropdown.offset().top-e>=b?(this.list.css("max-height",b),this.list.css("top",this.dropdown.position().top-
this.list.outerHeight())):(c=Math.abs(c+d+b-(f+e)),f=Math.abs(this.dropdown.offset().top-e-b),c<f?(this.list.css("max-height",b-c-d/2),this.list.css("top","auto")):(this.list.css("max-height",b-f-d/2),this.list.css("top",this.dropdown.position().top-this.list.outerHeight()))):(this.list.css("max-height",b),this.list.css("top","auto"))}return this};f.enable=function(a){this.options.disabled&&(this.triggerEvent("enable"),this.selectBox.removeAttr("disabled"),this.dropdown.attr("tabindex",0).removeClass(this.theme.disabled).addClass(this.theme.enabled),
this.setOption("disabled",!1),this._callbackSupport(a));return this};f.enableOption=function(c,b){var d;"number"===a.type(c)&&(d=this.selectBox.find("option").eq(c),this.triggerEvent("enable-option"),d.removeAttr("disabled"),this.listItems.eq(c).attr("data-disabled","false").removeClass(this.theme.disabled));this._callbackSupport(b);return this};f.moveDown=function(a){this.currentFocus+=1;var b="true"===this.listItems.eq(this.currentFocus).attr("data-disabled")?!0:!1,d=this.listItems.eq(this.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;
if(this.currentFocus===this.listItems.length)this.currentFocus-=1;else{if(b&&d){this.listItems.eq(this.currentFocus-1).blur();this.moveDown();return}b&&!d?this.currentFocus-=1:(this.listItems.eq(this.currentFocus-1).blur().end().eq(this.currentFocus).focusin(),this._scrollToView("down"),this.triggerEvent("moveDown"))}this._callbackSupport(a);return this};f.moveUp=function(a){this.currentFocus-=1;var b="true"===this.listItems.eq(this.currentFocus).attr("data-disabled")?!0:!1,d=this.listItems.eq(this.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;
if(-1===this.currentFocus)this.currentFocus+=1;else{if(b&&d){this.listItems.eq(this.currentFocus+1).blur();this.moveUp();return}b&&!d?this.currentFocus+=1:(this.listItems.eq(this.currentFocus+1).blur().end().eq(this.currentFocus).focusin(),this._scrollToView("up"),this.triggerEvent("moveUp"))}this._callbackSupport(a);return this};f._setCurrentSearchOption=function(a){if((this.options.aggressiveChange||this.options.selectWhenHidden||this.listItems.eq(a).is(":visible"))&&!0!==this.listItems.eq(a).data("disabled"))this.listItems.eq(this.currentFocus).blur(),
this.currentFocus=this.currentIndex=a,this.listItems.eq(this.currentFocus).focusin(),this._scrollToView("search"),this.triggerEvent("search");return this};f._searchAlgorithm=function(a,b){var d=!1,e,f,h,j,m=this.textArray,k=this.currentText;e=a;for(h=m.length;e<h;e+=1){j=m[e];for(f=0;f<h;f+=1)-1!==m[f].search(b)&&(d=!0,f=h);d||(k=this.currentText=this.currentText.charAt(this.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0"));b=RegExp(k,"gi");if(3>k.length){if(b=RegExp(k.charAt(0),"gi"),-1!==
j.charAt(0).search(b)){this._setCurrentSearchOption(e);if(j.substring(0,k.length).toLowerCase()!==k.toLowerCase()||this.options.similarSearch)this.currentIndex+=1;return!1}}else if(-1!==j.search(b))return this._setCurrentSearchOption(e),!1;if(j.toLowerCase()===this.currentText.toLowerCase())return this._setCurrentSearchOption(e),this.currentText="",!1}return!0};f.search=function(a,b,d){this.currentText=d?this.currentText+a.replace(/[|()\[{.+*?$\\]/g,"\\$0"):a.replace(/[|()\[{.+*?$\\]/g,"\\$0");this._searchAlgorithm(this.currentIndex,
RegExp(this.currentText,"gi"))&&this._searchAlgorithm(0,this.currentText);this._callbackSupport(b);return this};f._applyNativeSelect=function(){var a=this,b,d,e;a.dropdownContainer.append(a.selectBox);a.dropdown.attr("tabindex","-1");a.selectBox.css({display:"block",visibility:"visible",width:a.dropdown.outerWidth(),height:a.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"999999",margin:a.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"}).on({"changed.selectBoxIt":function(){b=
a.selectBox.find("option").filter(":selected");e=(d=b.attr("data-text"))?d:b.text();a._setText(a.dropdownText,e);a.list.find('li[data-val="'+b.val()+'"]').find("i").attr("class")&&a.dropdownImage.attr("class",a.list.find('li[data-val="'+b.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon");a.triggerEvent("option-click")}})};f._mobile=function(){this.isMobile&&this._applyNativeSelect();return this};f.remove=function(b,d){var e=this,f=a.type(b),l=0,h,j="";if("array"===f){for(h=
b.length;l<=h-1;l+=1)f=b[l],"number"===a.type(f)&&(j=j.length?j+(", option:eq("+f+")"):j+("option:eq("+f+")"));e.selectBox.find(j).remove()}else"number"===f?e.selectBox.find("option").eq(b).remove():e.selectBox.find("option").remove();e.dropdown?e.refresh(function(){e._callbackSupport(d)},!0):e._callbackSupport(d);return e};f.selectOption=function(b,d){var e=a.type(b);"number"===e?this.selectBox.val(this.selectItems.eq(b).val()).change():"string"===e&&this.selectBox.val(b).change();this._callbackSupport(d);
return this};f.setOption=function(b,d,e){var f=this;"string"===a.type(b)&&(f.options[b]=d);f.refresh(function(){f._callbackSupport(e)},!0);return f};f.setOptions=function(b,d){var e=this;a.isPlainObject(b)&&(e.options=a.extend({},e.options,b));e.refresh(function(){e._callbackSupport(d)},!0);return e};f.wait=function(a,b){this.widgetProto._delay.call(this,b,a);return this}});(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var b=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).data("tooltip-content")},position:{my:"center bottom",at:"center bottom",offset:"40 40"}},_init:function(){var d=this;this.showTimeout=null;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+b++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.on("focus.tooltip mouseenter.tooltip",function(a){d.open(a)}).on("blur.tooltip mouseleave.tooltip",function(a){d.close(a)}).data("tooltip-content",this.element.attr("title"))},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},
widget:function(){return this.element.pushStack(this.tooltip.get())},open:function(a){var b=this.element;if(!(this.current&&this.current[0]==b[0])){var f=this;this.current=b;b.removeAttr("title");var c=this.options.content.call(b[0],function(c){setTimeout(function(){f.current==b&&f._show(a,b,c)},13)});c&&(f.showTimeout=setTimeout(function(){f._show(a,b,c)},200))}},_show:function(b,e,f){f&&!this.options.disabled&&(this.tooltipContent.html(f),this.tooltip.css({top:0,left:0}).show().position(a.extend({of:e},
this.options.position)).hide(),parseInt(this.tooltip.css("left").replace(/px/,""))+this.tooltip.width()>window.innerWidth&&this.tooltip.css("left",window.innerWidth-(this.tooltip.width()+this.tooltip.width()/2)+"px"),this.tooltip.attr("aria-hidden","false"),e.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.stop(!1,!0).fadeIn(),this._trigger("open",b))},close:function(a){if(this.current){var b=this.current.attr("title",this.options.content.call(this.current));this.current=null;this.options.disabled||
(clearTimeout(this.showTimeout),b.removeAttr("aria-describedby"),this.tooltip.attr("aria-hidden","true"),this.tooltip.stop(!1,!0).fadeOut(),this._trigger("close",a))}}})})(jQuery);(function(a,b,d){function e(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function f(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),c=0.01+100*(c/d),d=Math.max(1-(1-a)/b*(100-c),a),f=m.substring(0,m.indexOf("Animation")).toLowerCase();j[e]||(k.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+e+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+
a+"}100%{opacity:"+d+"}}",0),j[e]=1);return e}function g(a,b){var c=a.style,e,f;if(c[b]!==d)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<h.length;f++)if(e=h[f]+b,c[e]!==d)return e}function i(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function n(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)a[e]===d&&(a[e]=c[e])}return a}function l(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var h=["webkit",
"Moz","ms","O"],j={},m,k=function(){var a=e("style");f(b.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},p=function o(a){if(!this.spin)return new o(a);this.opts=n(a||{},o.defaults,q)};p.defaults={};n(p.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,d=b.el=i(e(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),
f=c.radius+c.length+c.width,g,h;a&&(a.insertBefore(d,a.firstChild||null),h=l(a),g=l(d),i(d,{left:("auto"==c.left?h.x-g.x+(a.offsetWidth>>1):c.left+f)+"px",top:("auto"==c.top?h.y-g.y+(a.offsetHeight>>1):c.top+f)+"px"}));d.setAttribute("aria-role","progressbar");b.lines(d,b.opts);if(!m){var j=0,k=c.fps,n=k/c.speed,p=(1-c.opacity)/(n*c.trail/100),q=n/c.lines;(function z(){j++;for(var a=c.lines;a;a--){var e=Math.max(1-(j+a*q)%n*p,c.opacity);b.opacity(d,c.lines-a,e,c)}b.timeout=b.el&&setTimeout(z,~~(1E3/
k))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=d);return this},lines:function(a,b){function d(a,c){return i(e(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*g+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.width>>1)+"px"})}for(var g=0,h;g<b.lines;g++)h=i(e(),{position:"absolute",top:1+~(b.width/2)+
"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:m&&c(b.opacity,b.trail,g,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&f(h,i(d("#000","0 0 4px #000"),{top:"2px"})),f(a,f(h,d(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});(function(){function a(b,c){return e("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}var b=i(e("group"),{behavior:"url(#default#VML)"});!g(b,
"transform")&&b.adj?(k.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(b,c){function d(){return i(a("group",{coordsize:h+" "+h,coordorigin:-g+" "+-g}),{width:h,height:h})}function e(b,h,j){f(k,f(i(d(),{rotation:360/c.lines*b+"deg",left:~~h}),f(i(a("roundrect",{arcsize:1}),{width:g,height:c.width,left:c.radius,top:-c.width>>1,filter:j}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var g=c.length+c.width,h=2*g,j=2*-(c.width+c.length)+"px",k=i(d(),
{position:"absolute",top:j,left:j});if(c.shadow)for(j=1;j<=c.lines;j++)e(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(j=1;j<=c.lines;j++)e(j);return f(b,k)},p.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;if(a&&b+d<a.childNodes.length&&(a=(a=(a=a.childNodes[b+d])&&a.firstChild)&&a.firstChild))a.opacity=c}):m=g(b,"animation")})();a.Spinner=p})(window,document);
jQuery.fn.spin=function(a){this.each(function(){var b=$(this),d=b.data();d.spinner&&(d.spinner.stop(),delete d.spinner);!1!==a&&(d.spinner=(new Spinner($.extend({color:b.css("color")},a))).spin(this))});return this};(function(){$.klear=$.klear||{};$.klear.baseurl=$.klear.baseurl||$("base").attr("href");$.klear.loadedTemplates=$.klear.loadedTemplates||{};$.ajax({url:$.klear.baseurl+"../klear/template/cache",dataType:"json",success:function(a){if(a.templates)for(var b in a.templates)$.template(b,a.templates[b]),$.klear.loadedTemplates[b]=!0}})})();
